!function(a,b){function c(a,b){a=a.toString().split("."),b=b.toString().split(".");for(var c=0;c<a.length||c<b.length;c++){var d=parseInt(a[c],10),e=parseInt(b[c],10);if(window.isNaN(d)&&(d=0),window.isNaN(e)&&(e=0),e>d)return-1;if(d>e)return 1}return 0}function d(a,b){h&&c(i,"2.4.0")<0?setTimeout(function(){a&&a(b)},1):a&&a(b)}var e=a.document,f=a.navigator.userAgent,g=/iPhone|iPad|iPod/i.test(f),h=/Android/i.test(f),i=f.match(/(?:OS|Android)[\/\s](\d+[._]\d+(?:[._]\d+)?)/i),j=f.match(/WindVane[\/\s](\d+[._]\d+[._]\d+)/),k=Object.prototype.hasOwnProperty,l=b.windvane=a.WindVane||(a.WindVane={}),m=a.WindVane_Native,n={},o=1,p=[],q=3,r="hybrid",s="wv_hybrid",t="iframe_",u="suc_",v="err_",w="defer_",x="param_";i=i?(i[1]||"0.0.0").replace(/\_/g,"."):"0.0.0",j=j?(j[1]||"0.0.0").replace(/\_/g,"."):"0.0.0";var y={call:function(a,d,e,f,i,k){var l,n;return"number"==typeof arguments[arguments.length-1]&&(k=arguments[arguments.length-1]),"function"!=typeof f&&(f=null),"function"!=typeof i&&(i=null),b.promise&&(n=b.promise.deferred()),l=k>0?setTimeout(function(){y.onFailure(l,{ret:["WV_ERR::TIMEOUT"]})},k):z.getSid(),z.registerCall(l,f,i,n),h?c(j,"2.7.0")>=0?z.callMethodByPrompt(a,d,z.buildParam(e),l+""):m&&m.callMethod&&m.callMethod(a,d,z.buildParam(e),l+""):g&&z.callMethodByIframe(a,d,z.buildParam(e),l+""),n?n.promise():void 0},fireEvent:function(a,b,c){var d=e.createEvent("HTMLEvents");d.initEvent(a,!1,!0),!b&&c&&z.chunks[c]&&(b=z.chunks[c].join("")),d.param=z.parseParam(b),e.dispatchEvent(d)},getParam:function(a){return z.params[x+a]||""},setData:function(a,b){z.chunks[a]=z.chunks[a]||[],z.chunks[a].push(b)},onSuccess:function(a,b){clearTimeout(a);var c=z.unregisterCall(a),e=c.success,f=c.deferred;!b&&z.chunks[a]&&(b=z.chunks[a].join(""),delete z.chunks[a]);var g=z.parseParam(b);d(function(a){e&&e(a),f&&f.resolve(a)},g.value||g),z.onComplete(a)},onFailure:function(a,b){clearTimeout(a);var c=z.unregisterCall(a),e=c.failure,f=c.deferred;!b&&z.chunks[a]&&(b=z.chunks[a].join(""),delete z.chunks[a]);var g=z.parseParam(b);d(function(a){e&&e(a),f&&f.reject(a)},g.value||g),z.onComplete(a)}},z={params:{},chunks:{},buildParam:function(a){return a&&"object"==typeof a?JSON.stringify(a):a||""},parseParam:function(a){var b;if(a&&"string"==typeof a)try{b=JSON.parse(a)}catch(c){b={ret:["WV_ERR::PARAM_PARSE_ERROR"]}}else b=a||{};return b},getSid:function(){return Math.floor(Math.random()*(1<<50))+""+o++},registerCall:function(a,b,c,d){b&&(n[u+a]=b),c&&(n[v+a]=c),d&&(n[w+a]=d)},unregisterCall:function(a){var b=u+a,c=v+a,d=w+a,e={success:n[b],failure:n[c],deferred:n[d]};return delete n[b],delete n[c],e.deferred&&delete n[d],e},useIframe:function(a,b){var c=t+a,d=p.pop();d||(d=e.createElement("iframe"),d.setAttribute("frameborder","0"),d.style.cssText="width:0;height:0;border:0;display:none;"),d.setAttribute("id",c),d.setAttribute("src",b),d.parentNode||setTimeout(function(){e.body.appendChild(d)},5)},retrieveIframe:function(a){var b=t+a,c=e.querySelector("#"+b);p.length>=q?e.body.removeChild(c):p.push(c)},callMethodByIframe:function(a,b,c,d){var e=r+"://"+a+":"+d+"/"+b+"?"+c;this.params[x+d]=c,this.useIframe(d,e)},callMethodByPrompt:function(a,b,c,d){var e=r+"://"+a+":"+d+"/"+b+"?"+c,f=s+":";this.params[x+d]=c,window.prompt(e,f)},onComplete:function(a){g&&this.retrieveIframe(a),delete this.params[x+a]}};for(var A in y)k.call(l,A)||(l[A]=y[A])}(window,window.lib||(window.lib={}));!function(a,b){function c(a){a=a.split(".");for(var b,c,d=0;d<s.length;d++){if(b=parseInt(a[d],10)||0,c=parseInt(s[d],10)||0,b>c)return 1;if(c>b)return-1}return 0}function d(a){return"string"==typeof a}function e(a){return"number"==typeof a}function f(a){return"function"==typeof a}function g(a,b,c,d,e){a=a.split(".");var f=a[0],g=a[1];o&&o.call(f,g,b,c,d,e)}function h(a,b){return(a||b)&&function(c){c=b&&b(c)||c,a&&a(j(c))}}function i(a){return a&&function(b){a(k(b))}}function j(a){return a=a||{},a.errorCode=0,a.errorMessage="",a}function k(a){var b=6,c=d(a)?a:a.ret;if(a){var e=u.indexOf(c);b=e>0?e:b}return{errorCode:b,errorMessage:c,data:a}}var l,m,n=a.navigator.userAgent;if((l=n.match(/AliApp\(TB\/([\d\.]+)\)/))?m=l[1]:(l=n.match(/@([^_@]+)_(iphone|android|ipad|apad)_([\d\.]+)/))&&(m=l[3]),m||n.match(/WindVane[\/\s]([\d\.\_]+)/)){var o=b.windvane,p=document,q=/iPhone|iPad|iPod/i.test(n),r=/Android/i.test(n),s=n.match(/WindVane[\/\s](\d+)[._](\d+)[._](\d+)/i),s=s?s.slice(1,4):[0,0,0],t=location.host.match(/waptest|wapa/i),t=t&&t[0]||"m",u=["HY_SUCCESS","HY_NO_HANDLER","HY_PARAM_ERR","HY_UNKNOWN_ERR","HY_NO_PERMISSION","HY_TIMEOUT","HY_FAILED","HY_CLOSED"],v=0,w={},x="_HA_Loading",y=a.Ali=b.Ali={appinfo:{name:"taobao",ver:m||"0.0.0",engine:"windvane",engineVer:s.join(".")},toast:function(a,b){var c=d(a)?a:a&&a.text;g("TBDeviceInfo.showServiceMsg",{serviceMsg:c},h(b),i(b))},setTitle:function(a,b){var c=d(a)?a:a&&a.text,e=r?{title:c}:c;p.title=c,g("WebAppInterface.setCustomPageTitle",e,h(b),i(b)),b&&b(j(null))},showTitle:function(a){var b=p.title,c=r?{title:b}:b;g("WebAppInterface.setCustomPageTitle",c,h(a),i(a)),a&&a(j(null))},hideTitle:function(a){var b=" ",c=r?{title:b}:b;g("WebAppInterface.setCustomPageTitle",c,h(a),i(a)),a&&a(j(null))},pushWindow:function(a,b){var e=d(a)?a:a&&a.url;q&&c("4.5.0")>=0?g("Base.openWindow",{url:e},h(b),i(b)):location.href=e,b&&b(j(null))},popWindow:function(a){window.history.back(),a&&a(j(null))},login:function(a){if(!b.login)throw new Error("lib.login required");b.login.goLogin(),a&&a(j(null))},h5TradePay:function(a,b){var c="http://d."+t+".taobao.com/goAlipay.htm?simplepay=1&needpop=1";for(var d in a)c+="&"+d+"="+encodeURIComponent(a[d]);location.href=c,b&&b(j({payUrl:c}))},geolocation:{getCurrentPosition:function(a,b){a=a||{enableHighAcuracy:!0,address:!0},g("WVLocation.getLocation",a,h(b,function(a){var b=a.address,c=a.coords;b&&"object"==typeof b&&(a.city=b.city,a.cityCode=b.cityCode,a.province=b.province,a.address=b.addressLine),c&&(c.longitude=parseFloat(c.longitude),c.latitude=parseFloat(c.latitude),c.accuracy=parseFloat(c.accuracy))}),i(b))}},shake:{watch:function(a,b){var c=++v;return w[c]=b,g("WVMotion.listeningShake",{on:!0},h(function(a){a&&a.ret===u[0]?p.addEventListener("motion.shake",b,!1):b(a)}),i(b)),c},clearWatch:function(a,b){var c=w[a];f(c)&&p.removeEventListener("motion.shake",c,!1),g("WVMotion.listeningShake",{on:!1},h(b),i(b))}},vibration:{vibrate:function(a,b){a=e(a)?{duration:a}:a,g("WVMotion.vibrate",a,h(b),i(b))}},network:{getType:function(a){g("TBDeviceInfo.getInfo","",h(a,function(a){var b=a.network||"",c={type:b,isWifi:!1,is2G:!1,is3G:!1,isOnline:!1};return/WIFI/i.test(b)?c.isWifi=c.isOnline=!0:/GPRS|EDGE|CDMA/i.test(b)?c.is2G=c.isOnline=!0:/UMTS|HSDPA|EVDO/i.test(b)&&(c.is3G=c.isOnline=!0),c.isE=c.isG=c.isH=!1,c.networkAvailable=null!=b&&""!=b,c}),i(a))}},audio:{play:function(a,b){var c=d(a)?a:a&&a.url;g("H5AudioPlayer.play",{voiceUrl:c},h(b),i(b))},stop:function(a,b){g("H5AudioPlayer.stop",null,h(b),i(b))}},calendar:{add:function(a,b){a=a||{},a.eventId||(a.eventId=+new Date);var c=a.startDate,d=a.endDate,e=/[- :]/g;c&&(a.startTime=c.replace(e,""),a.endTime=d.replace(e,""),delete a.startDate,delete a.endDate);var f="http://m.taobao.com/go/CalendarMyPlan",g="";for(var h in a)g+=(g?"&":"")+h+"="+a[h];f=f+"?"+g,location.href=f,b&&b(j(null))}},photo:function(a,b){a=a||{},a.type="1",g("WVCamera.takePhoto",a,h(b,function(a){a.photo=a.resourceURL}),i(b))},contacts:{get:function(a,b){g("WVContacts.choose",null,h(b,function(a){var b=[{name:a.name,phoneNumber:a.phone,email:a.email}];return a.results=b,a}),i(b))}},showLoading:function(a,b){var c=p.getElementById(x);if(c)c.style.display="block";else{var d=p.createElement("div");d.id=x,d.style.cssText="position:absolute;width:100%;height:100%;left:0;top:0;background:url(http://a.tbcdn.cn/mw/base/styles/component/more/images/loading.gif) 50% 50% no-repeat;background-size:40px 16px;pointer-events:none;",c=p.createDocumentFragment(),c.appendChild(d)}p.body.appendChild(c),b&&b(j(null))},hideLoading:function(a){var b=p.getElementById(x);b&&(b.style.display="none"),a&&a(j(null))}},z=navigator.geolocation||(navigator.geolocation={});z.getCurrentPosition||(z.getCurrentPosition=y.geolocation.getCurrentPosition)}}(window,window.lib||(window.lib={}));if(typeof DeviceInfo!="object"){DeviceInfo={}}var PhoneGap={queue:{ready:true,commands:[],timer:null}};PhoneGap.Channel=function(e){this.type=e;this.handlers={};this.guid=0;this.fired=false;this.enabled=true};PhoneGap.Channel.prototype.subscribe=function(e,a,n){if(e==null){return}var t=e;if(typeof a=="object"&&e instanceof Function){t=PhoneGap.close(a,e)}n=n||t.observer_guid||e.observer_guid||this.guid++;t.observer_guid=n;e.observer_guid=n;this.handlers[n]=t;return n};PhoneGap.Channel.prototype.subscribeOnce=function(e,a){var n=null;var t=this;var o=function(){e.apply(a||null,arguments);t.unsubscribe(n)};if(this.fired){if(typeof a=="object"&&e instanceof Function){e=PhoneGap.close(a,e)}e.apply(this,this.fireArgs)}else{n=this.subscribe(o)}return n};PhoneGap.Channel.prototype.unsubscribe=function(e){if(e instanceof Function){e=e.observer_guid}this.handlers[e]=null;delete this.handlers[e]};PhoneGap.Channel.prototype.fire=function(e){if(this.enabled){var a=false;for(var n in this.handlers){var t=this.handlers[n];if(t instanceof Function){var o=t.apply(this,arguments)==false;a=a||o}}this.fired=true;this.fireArgs=arguments;return!a}return true};PhoneGap.Channel.join=function(e,a){var n=a.length;var t=function(){if(!--n){e()}};for(var o=0;o<n;o++){!a[o].fired?a[o].subscribeOnce(t):n--}if(!n){e()}};PhoneGap.available=DeviceInfo.uuid!=undefined;PhoneGap.addConstructor=function(e){PhoneGap.onPhoneGapInit.subscribeOnce(function(){try{e()}catch(a){if(typeof debug.log=="function"){debug.log("Failed to run constructor: "+debug.processMessage(a))}else{alert("Failed to run constructor: "+a.message)}}})};PhoneGap.addPlugin=function(e,a){if(!window.plugins){window.plugins={}}if(!window.plugins[e]){window.plugins[e]=a}};PhoneGap.onDOMContentLoaded=new PhoneGap.Channel("onDOMContentLoaded");PhoneGap.onNativeReady=new PhoneGap.Channel("onNativeReady");PhoneGap.onPhoneGapInit=new PhoneGap.Channel("onPhoneGapInit");PhoneGap.onPhoneGapReady=new PhoneGap.Channel("onPhoneGapReady");PhoneGap.onPhoneGapInfoReady=new PhoneGap.Channel("onPhoneGapInfoReady");PhoneGap.onResume=new PhoneGap.Channel("onResume");PhoneGap.onPause=new PhoneGap.Channel("onPause");if(typeof _nativeReady!=="undefined"){PhoneGap.onNativeReady.fire()}PhoneGap.onDeviceReady=new PhoneGap.Channel("onDeviceReady");PhoneGap.Channel.join(function(){setTimeout(function(){try{if(CallbackServer.usePolling()){PhoneGap.JSCallbackPolling()}else{PhoneGap.JSCallback()}}catch(e){console.log("Error in PhoneGap.Channel.join setTimeout")}},1);PhoneGap.onPhoneGapInit.fire();PhoneGap.onPhoneGapReady.fire()},[PhoneGap.onDOMContentLoaded,PhoneGap.onNativeReady]);PhoneGap.Channel.join(function(){navigator.notification.activityStop();PhoneGap.onDeviceReady.fire();PhoneGap.onResume.fire()},[PhoneGap.onPhoneGapReady,PhoneGap.onPhoneGapInfoReady]);document.addEventListener("DOMContentLoaded",function(){PhoneGap.onDOMContentLoaded.fire()},false);PhoneGap.m_document_addEventListener=document.addEventListener;document.addEventListener=function(e,a,n){var t=e.toLowerCase();if(t=="deviceready"){PhoneGap.onDeviceReady.subscribeOnce(a)}else{if(t=="resume"){PhoneGap.onResume.subscribe(a)}else{if(t=="pause"){PhoneGap.onPause.subscribe(a)}else{PhoneGap.m_document_addEventListener.call(document,e,a)}}}};PhoneGap.stringify=function(e){if(typeof JSON=="undefined"){var a="[";for(var n=0;n<e.length;n++){if(n>0){a=a+","}var t=typeof e[n];if(t=="number"||t=="boolean"){a=a+e[n]}else{if(e[n]instanceof Array){a=a+"["+e[n]+"]"}else{if(e[n]instanceof Object){var o=true;a=a+"{";for(var r in e[n]){if(!o){a=a+","}a=a+'"'+r+'":';var i=typeof e[n][r];if(i=="number"||i=="boolean"){a=a+e[n][r]}else{a=a+'"'+e[n][r]+'"'}o=false}a=a+"}"}else{var l=e[n].replace(/\\/g,"\\\\");l=l.replace(/"/g,'\\"');a=a+'"'+l+'"'}}}}a=a+"]";return a}else{return JSON.stringify(e)}};PhoneGap.clone=function(e){if(!e){return e}if(e instanceof Array){var a=new Array;for(var n=0;n<e.length;++n){a.push(PhoneGap.clone(e[n]))}return a}if(e instanceof Function){return e}if(!(e instanceof Object)){return e}a=new Object;for(n in e){if(!(n in a)||a[n]!=e[n]){a[n]=PhoneGap.clone(e[n])}}return a};PhoneGap.callbackId=0;PhoneGap.callbacks={};PhoneGap.callbackStatus={NO_RESULT:0,OK:1,CLASS_NOT_FOUND_EXCEPTION:2,ILLEGAL_ACCESS_EXCEPTION:3,INSTANTIATION_EXCEPTION:4,MALFORMED_URL_EXCEPTION:5,IO_EXCEPTION:6,INVALID_ACTION:7,JSON_EXCEPTION:8,ERROR:9};PhoneGap.exec=function(success,fail,service,action,args){try{var callbackId=service+PhoneGap.callbackId++;if(success||fail){PhoneGap.callbacks[callbackId]={success:success,fail:fail}}var r=""+PluginManager.exec(service,action,callbackId,this.stringify(args),true);if(r.length>0){eval("var v="+r+";");if(v.status==PhoneGap.callbackStatus.OK){if(success){try{success(v.message)}catch(e){console.log("Error in success callback: "+callbackId+" = "+e)}if(!v.keepCallback){delete PhoneGap.callbacks[callbackId]}}return v.message}else{if(v.status==PhoneGap.callbackStatus.NO_RESULT){if(!v.keepCallback){delete PhoneGap.callbacks[callbackId]}}else{console.log("Error: Status="+r.status+" Message="+v.message);if(fail){try{fail(v.message)}catch(e){console.log("Error in error callback: "+callbackId+" = "+e)}if(!v.keepCallback){delete PhoneGap.callbacks[callbackId]}}return null}}}}catch(e){console.log("Error: "+e)}};PhoneGap.callbackSuccess=function(e,a){if(PhoneGap.callbacks[e]){if(a.status==PhoneGap.callbackStatus.OK){try{if(PhoneGap.callbacks[e].success){PhoneGap.callbacks[e].success(a.message)}}catch(n){console.log("Error in success callback: "+e+" = "+n)}}if(!a.keepCallback){delete PhoneGap.callbacks[e]}}};PhoneGap.callbackError=function(e,a){if(PhoneGap.callbacks[e]){try{if(PhoneGap.callbacks[e].fail){PhoneGap.callbacks[e].fail(a.message)}}catch(n){console.log("Error in error callback: "+e+" = "+n)}if(!a.keepCallback){delete PhoneGap.callbacks[e]}}};PhoneGap.run_command=function(){if(!PhoneGap.available||!PhoneGap.queue.ready){return}PhoneGap.queue.ready=false;var e=PhoneGap.queue.commands.shift();if(PhoneGap.queue.commands.length==0){clearInterval(PhoneGap.queue.timer);PhoneGap.queue.timer=null}var a=[];var n=null;for(var t=1;t<e.length;t++){var o=e[t];if(o==undefined||o==null){o=""}if(typeof o=="object"){n=o}else{a.push(encodeURIComponent(o))}}var r="gap://"+e[0]+"/"+a.join("/");if(n!=null){var i=[];for(var l in n){if(typeof l!="string"){continue}i.push(encodeURIComponent(l)+"="+encodeURIComponent(n[l]))}if(i.length>0){r+="?"+i.join("&")}}document.location=r};PhoneGap.JSCallback=function(){var xmlhttp=new XMLHttpRequest;PhoneGap.JSCallbackPort=CallbackServer.getPort();PhoneGap.JSCallbackToken=CallbackServer.getToken();xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4){if(xmlhttp.status==200){var msg=xmlhttp.responseText;setTimeout(function(){try{var t=eval(msg)}catch(e){console.log("Message from Server: "+msg);console.log("JSCallback Error: "+e)}},1);setTimeout(PhoneGap.JSCallback,1)}else{if(xmlhttp.status==404){setTimeout(PhoneGap.JSCallback,10)}else{console.log("The status is: "+xmlhttp.status);console.log("JSCallback Error: Request failed.");CallbackServer.restartServer();setTimeout(PhoneGap.JSCallback,100)}}}};xmlhttp.open("GET","http://127.0.0.1:"+PhoneGap.JSCallbackPort+"/"+PhoneGap.JSCallbackToken,true);xmlhttp.send()};PhoneGap.JSCallbackPollingPeriod=50;PhoneGap.JSCallbackPolling=function(){var msg=CallbackServer.getJavascript();if(msg){setTimeout(function(){try{var t=eval(""+msg)}catch(e){console.log("JSCallbackPolling Error: "+e)}},1);setTimeout(PhoneGap.JSCallbackPolling,1)}else{setTimeout(PhoneGap.JSCallbackPolling,PhoneGap.JSCallbackPollingPeriod)}};PhoneGap.createUUID=function(){return PhoneGap.UUIDcreatePart(4)+"-"+PhoneGap.UUIDcreatePart(2)+"-"+PhoneGap.UUIDcreatePart(2)+"-"+PhoneGap.UUIDcreatePart(2)+"-"+PhoneGap.UUIDcreatePart(6)};PhoneGap.UUIDcreatePart=function(e){var a="";for(var n=0;n<e;n++){var t=parseInt(Math.random()*256).toString(16);if(t.length==1){t="0"+t}a+=t}return a};PhoneGap.close=function(e,a,n){if(typeof n==="undefined"){return function(){return a.apply(e,arguments)}}else{return function(){return a.apply(e,n)}}};var TMM=TMM||{};TMM.getRandom=function(e,a){switch(arguments.length){case 1:return parseInt(Math.random()*e+1);case 2:return parseInt(Math.random()*(a-e+1)+e);default:return 0}};TMM.getPara=function(e,a){a=a||location.toString();if(a.indexOf("?")==-1||a.indexOf(e+"=")==-1){return""}a=a.split("#")[0];var n=a.substring(location.href.indexOf("?")+1);var t=n.split("&");var o,r,i;for(var l=0;l<t.length;l++){o=t[l].indexOf("=");if(o==-1){continue}r=t[l].substring(0,o);i=t[l].substring(o+1);if(r==e){return unescape(i.replace(/\+/g," "))}}return""};TMM.cookie=function(e,a,n){if(typeof a!="undefined"){n=n||{};if(a===null){a="";n.expires=-1}var t="";if(n.expires&&(typeof n.expires=="number"||n.expires.toUTCString)){var o;if(typeof n.expires=="number"){o=new Date;o.setTime(o.getTime()+n.expires*24*60*60*1e3)}else{o=n.expires}t="; expires="+o.toUTCString()}var r=n.path?"; path="+n.path:"";var i=n.domain?"; domain="+n.domain:"";var l=n.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(a),t,r,i,l].join("")}else{var s=null;if(document.cookie&&document.cookie!=""){var c=document.cookie.split(";");for(var u=0;u<c.length;u++){var f=c[u].trim();if(f.substring(0,e.length+1)==e+"="){s=decodeURIComponent(f.substring(e.length+1));break}}}return s}};TMM.UA={os:function(){var e=navigator.userAgent;var a=["iPhone OS ","Android ","Android/"];var n={iphone:false,android:false};var t="";var o=[];for(var r=0;r<a.length;r++){var i=e.indexOf(a[r]);if(i>-1){switch(r){case 0:n["iphone"]=true;break;case 1:n["android"]=true;break;case 2:n["android"]=true;break}var l=a[r].length;t=e.substr(i+l,6);o=t.split(/_|\./)}}var s={iphone:n["iphone"],android:n["android"],version:o,tmallApp:null};var c=e.split("T-UA=");if(c.length>1){var u=c[1].split("_");s.tmallApp=u[1]}return s}(),WindVane:function(){var e=navigator.userAgent;var a="WindVane/";var n=e.indexOf(a);if(n==-1)return null;return e.substr(n+a.length,5)}()};TMM.APP={call:function(funName,param,success,fail,isDebug){param=param||[];if(funName=="Stats.trace"&&param.length<3){param.push("")}if(isDebug){success=fail=function(e){alert(typeof e=="object"?JSON.stringify([e]):e)}}if(typeof arguments[arguments.length-1]==="number"){var timeout=arguments[arguments.length-1];var noTimeout=function(e){var a=["Share.share","Application.login","Application.addShakeListener","Lottery.shake","Share.point"];return a.indexOf(e)>-1};var timeoutTimer=setTimeout(function(e){if(noTimeout(e)){return}success&&success({errorCode:5,errorMessage:"\u8c03\u7528\u8d85\u65f6"})},timeout,funName);if(typeof success=="function"){var suc=success;success=function(e){suc(e);clearTimeout(timeoutTimer);timeoutTimer=null}}if(typeof fail=="function"){var tempFail=fail;fail=function(e){tempFail(e);clearTimeout(timeoutTimer);timeoutTimer=null}}}if(!TMM.UA.os.tmallApp&&TMM.UA.WindVane&&window.WindVane){if(funName=="Stats.trace"||funName=="Server.HybridServer"){var mtopParam=null;if(param[1]){try{eval("mtopParam = "+param[1])}catch(e){}}else{mtopParam={}}window.WindVane.call("WVServer","send",{api:"mtop.tmw."+param[0],v:"1.0",post:"1",ecode:"1",isSec:"1",param:mtopParam},success,fail)}return}if(TMM.UA.os.android){if(parseFloat(TMM.UA.os.tmallApp)<4.4&&typeof PluginManager!=="undefined"){funName=funName.split(".");var suc=null;if(!isDebug){if(success){suc=function(data){try{eval("var json="+data);success(json)}catch(e){console.log("TmmError:"+e);if(fail)fail()}}}}else{suc=success}PhoneGap.exec(suc,fail,funName[0],funName[1],param)}else{var callbackId=funName.split(".")[0]+PhoneGap.callbackId++;var successName="",failName="";PhoneGap.callbacks[callbackId]={success:function(e){success&&success(JSON.parse(e.message))},fail:function(e){fail&&fail(JSON.parse(e.message))}};successName="PhoneGap.callbacks."+callbackId+".success";failName="PhoneGap.callbacks."+callbackId+".fail";window.prompt("js-appcall.html?"+funName+":"+encodeURIComponent(PhoneGap.stringify(param))+":"+successName+":"+failName)}}else{var iframe=document.createElement("iframe");var callbackId=funName.split(".")[0]+PhoneGap.callbackId++;var successName="",failName="";if(success||fail){PhoneGap.callbacks[callbackId]={success:function(e){success(e);try{iframe.parentNode.removeChild(iframe)}catch(a){}},fail:function(e){fail(e);try{iframe.parentNode.removeChild(iframe)}catch(a){}}};successName="PhoneGap.callbacks."+callbackId+".success";failName="PhoneGap.callbacks."+callbackId+".fail"}iframe.setAttribute("src","js-appcall.html?"+funName+":"+encodeURIComponent(PhoneGap.stringify(param))+":"+successName+":"+failName);iframe.style.display="none";document.body.appendChild(iframe);iframe.onload=function(){try{var json=iframe.contentDocument.body.innerText||iframe.contentDocument.body.textContent;eval("json = "+json)}catch(e){}if(successName)eval(successName+"(json)")}}},update:function(){if(TMM.UA.os.iphone){self.location="http://itunes.apple.com/cn/app/id518966501?mt=8"}else{TMM.APP.call("Application.update",[false])}}};TMM.Device={motion:function(e,a){if(!window.DeviceMotionEvent)return;var n={last_update:0,x:null,y:null,z:null,last_x:null,last_y:null,last_z:null};window.addEventListener("devicemotion",function(t){var o=t.accelerationIncludingGravity;var r=(new Date).getTime();if(r-n.last_update>100){var i=r-n.last_update;n.last_update=r;n.x=o.x;n.y=o.y;n.z=o.z;var l=(Math.abs(n.x-n.last_x)+Math.abs(n.y-n.last_y)+Math.abs(n.z-n.last_z))/i*1e4;if(l>e){a()}n.last_x=n.x;n.last_y=n.y;n.last_z=n.z}},false)},vibrate:function(e,a){if(a){TMM.APP.call("Notification.vibrate",[500])}else if(navigator.vibrate){navigator.vibrate(500)}}};TMM.Log={sprefer:function(e){var a="log_"+(new Date).getTime();var n=window[a]=new Image;n.onload=n.onerror=function(){window[a]=null};n.src="http://m.tmall.com/web_channel.htm?url=/act/tmm-blank.php&sprefer="+e+"&t="+(new Date).valueOf();n=null}};(function(e){if(!/T-UA/i.test(navigator.userAgent)){return}var t=location.host.match(/waptest|wapa/i),t=t&&t[0]||"m";function r(e){return typeof e==="string"}function o(e){return typeof e==="number"}function n(e,t,r,o,n){if(typeof TMM!="undefined"&&TMM&&TMM.APP&&TMM.APP.call){TMM.APP.call(e,t,i(r,n),a(o,r))}else{r&&r({errorCode:3,errorMessage:"FAILED"})}}function i(e,t){return(e||t)&&function(r){r=t&&t(r)||r;r.errorCode=r.errorCode||0;r.errorMessage=r.errorMessage||"\u8c03\u7528\u6210\u529f";e&&e(r)}}function a(e,t){return e||t&&function(e){var r={};if(e&&e.ret){r.errorCode=e.ret.retCod;r.errorMessage=e.ret.retMsg;if(r.errorCode==-1&&r.errorMessage=="Unimplemented method"){r.errorCode=1;r.errorMessage="\u63a5\u53e3\u4e0d\u5b58\u5728"}}else{r.errorCode=1;r.errorMessage="\u63a5\u53e3\u4e0d\u5b58\u5728"}return t(r)}}var c=0;function u(){c++;return c}var s=e.Ali={ua:navigator.userAgent,appinfo:function(){var e=navigator.userAgent.replace(/.*t-ua.*(\d+\.\d+\.\d+).*/gi,"$1");return{engine:"tmm",name:"tmal",engineVer:e,ver:e}}(),toast:function(e,t){if(!e){return}var o=r(e)?e:e&&e.text;if(parseFloat(TMM.UA.os.tmallApp)>=4.3){n("Window.toast",[o])}else{var i='<div id="Ali-toast" style="position:absolute;top:0;left:0;width:100%;height:100%;text-align:center;z-index:99;" ontouchstart="event.preventDefault()">                    <div style="margin:50% 10px;background:#000;-webkit-border-radius:8px;display:inline-block;min-width:80px;">                        <div style="font-size:16px;color:#fff;word-break:break-all;padding:8px;">'+o+"</div>                    </div>                </div>";var a=document.querySelector("#Ali-toast");if(a){a.parentNode.removeChild(a)}document.body.insertAdjacentHTML("beforeEnd",i);a=document.querySelector("#Ali-toast");a.style.top=window.scrollY+"px";setTimeout(function(){try{a.parentNode.removeChild(a);a=null}catch(e){}},e.duration||2e3)}t&&t({})},setTitle:function(e,t){var o=r(e)?e:e&&e.text;n("Window.setTitle",[o]);t&&t({})},showTitle:function(e){n("Window.showTitle",[],e)},hideTitle:function(e){n("Window.hideTitle",[],e)},showLoading:function(e,t){if(TMM.UA.os.android&&!e){e="\u52a0\u8f7d\u4e2d..."}n("Window.showProgress",[e]);t&&t({})},hideLoading:function(e){n("Window.hideProgress",[]);e&&e({})},pushWindow:function(e,t){var o=r(e)?e:e&&e.url;if(o){n("Logic.triggerAction",["link:url="+o]);t&&t({})}else{t&&t({errorCode:2,errorMessage:"\u53c2\u6570\u65e0\u6548"})}},popWindow:function(e){n("Window.back",[],e);e&&e({})},popTo:function(e){n("Window.back",[]);e&&e({})},login:function(e){n("Application.login",[true],e)},h5TradePay:function(e,r){var o="http://d."+t+".taobao.com/goAlipay.htm?simplepay=1&needpop=1";for(var n in e){o+="&"+n+"="+encodeURIComponent(e[n])}s.pushWindow(o);r&&r({})},geolocation:{getCurrentPosition:function(e,t){if(typeof e=="function"){t=e}n("Application.getGps",[],t,t,function(e){var t=e.data;t.coords={latitude:t.latitude,longitude:t.longitude};delete t.latitude;delete t.longitude;return t})}},orientation:{watch:function(e,t){var r=u();var i=o(e)?e:e?e.duration:100;n("Orientation.watchOrientation",["orientation-"+r,i],t,null,function(e){try{var t=e.data;if(TMM.UA.os.iphone&&parseFloat(TMM.UA.os.tmallApp)<=4.3){var r=t.alpha;t.alpha=t.gamma;t.gamma=r}else if(TMM.UA.os.android&&typeof t["beta "]!="undefined"){t.beta=t["beta "];delete t["beta "]}return t}catch(o){return{errorCode:3,errorMessage:"\u53d1\u751f\u672a\u77e5\u9519\u8bef"}}});return r},clearWatch:function(e,t){n("Orientation.clearWatch",["orientation-"+e]);t&&t({})}},shake:{watch:function(e,t){var r=u();var e=e||{};var i=o(e)?e:e.sensitivity||1;i=i>5?5:i;var a=typeof e=="object"?e.callbackDelay||3e3:3e3;var c=typeof e=="object"?e.frequency||150:150;s.shake["_watchTimer"+r]=null;var d=(new Date).getTime();s.shake["_watch"+r]=function(){if(s.shake["_watch"+r]){n("Application.addShakeListener",[i],function(e){var o=(new Date).getTime();if(o-d>=c){s.shake["_watchTimer"+r]=setTimeout(s.shake["_watch"+r],a);t&&t(e);d=o}})}};s.shake["_watch"+r]();return r},clearWatch:function(e,t){n("Application.removeShakeListener",[]);clearTimeout(s.shake["_watch"+e]);delete s.shake["_watchTimer"+e];delete s.shake["_watch"+e];t&&t({})}},vibration:{vibrate:function(e,t){e=o(e)?{duration:e}:e;n("Notification.vibrate",[e.duration||500]);t&&t({})}},network:{getType:function(e){n("Application.networkType",[],e,null,function(e){var t=e.type;var r={type:t,networkAvailable:t!=="",isOnline:t!=="",isWifi:t==="WIFI",is3G:t==="3G",is2G:t==="2G",isG:t==="G",isH:t==="H",isE:t==="E"};return r})},watch:function(e){var t=u();n("Network.watch",["network-"+t],e);return t},clearWatch:function(e,t){n("Network.clearWatch",["network-"+e],t)}},motion:{watch:function(e,t){var r=u();n("Motion.watchAcceleration",["motion-"+r],t,null,function(e){var t={errorCode:e.ret&&e.ret.retCod||e.code||0,errorMessage:e.ret&&e.ret.retMsg||""};t.accelerationIncludingGravity=t.acceleration=e.data||{};return t});return r},clearWatch:function(e,t){n("Motion.clearWatch",["motion-"+e]);t&&t({})}},audio:{play:function(e,t){var o=u();var i=r(e)?e:e&&e.url;n("Audio.play",["audio-"+o,i]);t&&t({});return o},stop:function(e,t){n("Audio.stop",["audio-"+e]);t&&t({})}},calendar:{add:function(e,t){var r=e.startDate.split(" ");e.time=new Date(r[0]).getTime();var o=r[1].split(":");e.time=e.time+(parseInt(o[0],10)-8)*60*60*1e3+parseInt(o[1],10)*60*1e3+parseInt(o[2],10)*1e3;e.text=e.title;if(TMM.UA.os.android){if(e.notes.indexOf("http")!=0){e.notes=""}}n("Application.alarm",[e.time,e.text,e.notes],t,null,function(e){return{errorCode:e.code,errorMessage:e.code?"\u7528\u6237\u53d6\u6d88":""}})}},photo:function(e,t){e=e?e:{};n("Application.getCameraPic",[e.url||"",e.width||0,e.height||0],t,function(e){if(e===""){t({errorCode:6,errorMessage:"\u7528\u6237\u53d6\u6d88"})}},function(e){return{errorCode:e.ret.retCod,errorMessage:e.ret.retMsg,photo:e.data.image}})},contacts:{get:function(e,t){n("Application.getContacts",[],t)}}}})(window);!function(t){var e=t.Ali=t.Ali||{},o=e._noSuchApi=function(t){t&&t({errorCode:1,errorMessage:"接口不存在"})};if(e.ua||(e.ua=navigator.userAgent),!e.photo){var i=function(e,o,i){o=o||{};var n=t.innerWidth,a=t.innerHeight;o.maxWidth=o.maxWidth||n,o.maxHeight=o.maxHeight||a;var r=document.createElement("video"),c=document.createElement("canvas");if(r.setAttribute("width",n),r.setAttribute("height",a),r.setAttribute("autoplay","autoplay"),r.style.cssText="position:absolute;top:0;left:0;z-index:999;width:"+n+"px;height:"+a+"px;",document.body.appendChild(r),c.setAttribute("width",o.maxWidth),c.setAttribute("height",o.maxHeight),navigator.mozGetUserMedia)r.mozSrcObject=e;else{var v=t.URL||t.webkitURL;r.src=v.createObjectURL(e)}var u=function(t){e.stop(),document.body.removeChild(r),r.onclick=null,r=null,i(t)};r.onerror=function(t){u({errorCode:3,errorMessage:t.message})},r.onclick=function(){var t,e,i,n;r.videoWidth/r.videoHeight>o.maxWidth/o.maxHeight?(e=r.videoHeight,t=Math.ceil(e*o.maxWidth/o.maxHeight),i=Math.ceil((r.videoWidth-t)/2),n=0):(t=r.videoWidth,e=Math.ceil(t*o.maxHeight/o.maxWidth),n=Math.ceil((r.videoHeight-e)/2),i=0),c.getContext("2d").drawImage(r,i,n,t,e,0,0,o.maxWidth,o.maxHeight),u({photo:c.toDataURL("image/"+(o.format||"png"))})}};e.photo=function(e,n){return navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getMedia&&t.HTMLVideoElement&&t.HTMLCanvasElement?void navigator.getMedia({video:!0,audio:!1},function(t){setTimeout(function(){i(t,e,n)},1e3)},function(t){n({errorCode:3,errorMessage:t.message})}):void o(n)}}e.toast||(e.toast=function(t,e){o(e)}),e.setTitle||(e.setTitle=function(t,e){"string"==typeof t&&(t={text:t}),t&&t.text&&(document.title=t.text),e&&e({})}),e.showTitle||(e.showTitle=function(t){o(t)}),e.hideTitle||(e.hideTitle=function(t){o(t)}),e.showLoading||(e.showLoading=function(t,e){o(e)}),e.hideLoading||(e.hideLoading=function(t){o(t)}),e.pushWindow||(e.pushWindow=function(e,o){"string"==typeof e&&(e={url:e}),e&&e.url&&t.open(e.url),o&&o({})}),e.popWindow||(e.popWindow=function(t){o(t)}),e.popTo||(e.popTo=function(t,e){o(e)}),e.login||(e.login=function(t){o(t)}),e.h5TradePay||(e.h5TradePay=function(e,o){var i=location.host.match(/waptest|wapa/i);i=i&&i[0]||"m";var n="http://d."+i+".taobao.com/goAlipay.htm?simplepay=1&needpop=1";for(var a in e)n+="&"+a+"="+encodeURIComponent(e[a]);t.open(n),o&&o({})}),e.tradePay||(e.tradePay=function(t,e){o(e)}),e._getCUID=function(){var t=0;return function(){return t+=1}}();var n=e._store=e._store||{},a={};n.get=function(t){return a[t]},n.set=function(t,o){return"undefined"==typeof o&&(o=t,t=e._getCUID()),a[t]=o,t},n.remove=function(t){delete a[t]},e.appinfo=e.appinfo||{},e.appinfo.name=e.appinfo.name||"web",e.appinfo.ver=e.appinfo.ver||"1.0.0",e.appinfo.engine=e.appinfo.engine||e.appinfo.name,e.appinfo.engineVer=e.appinfo.engineVer||e.appinfo.ver;var r=e.calendar=e.calendar||{};r.add||(r.add=function(t,o){e._noSuchApi(o)});var c=e.contacts=e.contacts||{};c.get||(c.get=function(t,o){e._noSuchApi(o)});var v=e.network=e.network||{},u=function(t){var e="none"!==t,o="wifi"===t;return{type:t,networkAvailable:e,isOnline:e,isWifi:o,is3G:!1,is2G:!1,isG:!1,isH:!1,isE:!1}},g=navigator.connection||navigator.webkitConnection||navigator.mozConnection||navigator.msConnection;v.getType||(v.getType=function(t){g&&g.type?t(u(g.type)):e._noSuchApi(t)}),v.watch||(v.watch=function(t){var o=0;if(g){var i=function(){t(u(g.type))};o=n.set(i),g.addEventListener("typechange",i)}else e._noSuchApi(t);return o}),v.clearWatch||(v.clearWatch=function(t,e){var o=n.get(t);g&&o&&(g.removeEventListener("typechange",o),n.remove(t)),e&&e({})});var s=e.vibration=e.vibration||{};navigator.vibrate=navigator.vibrate||navigator.weblibkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate||(t.Notification&&Notification.vibrate?navigator.vibrate=Notification.vibrate:navigator.notification&&navigator.notification.vibrate&&(navigator.vibrate=navigator.notification.vibrate)),s.vibrate?navigator.vibrate||(navigator.vibrate=function(t){"[object Array]"===Object.prototype.toString.call(t)&&(t=t[0]),s.vibrate(t,function(){})}):s.vibrate=function(t,o){var i={};navigator.vibrate?navigator.vibrate(t.duration||t):e._noSuchApi(o),o&&o(i)};var l=e.geolocation=e.geolocation||{};l.getCurrentPosition?navigator.geolocation&&navigator.geolocation.getCurrentPosition||(navigator.geolocation=navigator.geolocation||{},navigator.geolocation.getCurrentPosition=function(t,e,o){l.getCurrentPosition(o,function(o){o.errorCode?e(o.errorMessage):t(o)})}):l.getCurrentPosition=function(t,o){t=t||{},t.timeout=t.timeout||1e3,navigator.geolocation&&navigator.geolocation.getCurrentPosition?navigator.geolocation.getCurrentPosition(function(t){o(t&&t.coords?t:{errorCode:3,errorMessage:"获取gps错误"})},function(t){o({errorCode:3,errorMessage:t.message})},t):e._noSuchApi(o)},l.watchPosition?navigator.geolocation&&navigator.geolocation.watchPosition||(navigator.geolocation=navigator.geolocation||{},navigator.geolocation.watchPosition=function(t,e,o){return o=o||{},l.watchPosition(o,function(o){o.errorCode?e(o.errorMessage):t(o)})}):l.watchPosition=function(t,o){return t=t||{},t.timeout=t.timeout||1e3,navigator.geolocation&&navigator.geolocation.watchPosition?navigator.geolocation.watchPosition(function(t){o(t&&t.coords?t:{errorCode:3,errorMessage:"获取gps错误"})},function(t){o({errorCode:3,errorMessage:t.message})},t):(e._noSuchApi(o),0)},l.clearWatch||(l.clearWatch=function(t,o){var i={};navigator.geolocation&&navigator.geolocation.clearWatch?navigator.geolocation.clearWatch(t):e._noSuchApi(o),o&&o(i)});var d=e.audio=e.audio||{};d.play||(d.play=function(t,e){"string"==typeof t&&(t={url:t});var o=document.createElement("audio");o.src=t.url,o.load(),o.play();var i=n.set(o);return e&&e({soundId:i}),i}),d.stop||(d.stop=function(t,e){var o=n.get(t);o&&(o.pause&&o.pause(),n.remove(t)),e&&e({})});var h=e.motion=e.motion||{},f=.8;h.watch||(h.watch=function(o,i){var a=0;if(t.DeviceMotionEvent){var r=function(t){var e={acceleration:t.acceleration,accelerationIncludingGravity:t.accelerationIncludingGravity},o=e.accelerationIncludingGravity;if((null===o.x||null===o.y||null===o.z)&&(o=e.accelerationIncludingGravity={x:0,y:0,z:0}),o&&(!e.acceleration||"number"!=typeof e.acceleration.x)){var n=[0,0,9.81];n[0]=f*n[0]+(1-f)*o.x,n[1]=f*n[1]+(1-f)*o.y,n[2]=f*n[2]+(1-f)*o.z,e.acceleration={x:o.x-n[0],y:o.y-n[1],z:o.z-n[2]}}i(e)};a=n.set(r),t.addEventListener("devicemotion",r)}else e._noSuchApi(i);return a}),h.clearWatch||(h.clearWatch=function(e,o){var i=n.get(e);t.DeviceMotionEvent&&i&&(t.removeEventListener("devicemotion",i),n.remove(e)),o&&o({})});var p=e.orientation=e.orientation||{};p.watch||(p.watch=function(o,i){var a=0;return t.DeviceOrientationEvent&&"ondeviceorientation"in t?(a=n.set(function(t){var e={alpha:t.alpha||0,gamma:t.gamma||0,beta:t.beta||0,absolute:!!t.absolute};i(e)}),t.addEventListener("deviceorientation",n.get(a))):e._noSuchApi(i),a}),p.clearWatch||(p.clearWatch=function(e,o){var i=n.get(e);t.DeviceOrientationEvent&&i&&(t.removeEventListener("deviceorientation",i),n.remove(e)),o&&o({})});var m=e.shake=e.shake||{};m.watch||(m.watch=function(t,e){t=t||{},t.sensitivity=t.sensitivity||20,t.frequency=t.frequency||150,t.callbackDelay=t.callbackDelay||3e3;var o,i,a={},r=n.set(a),c=function(){o||(o=i);var n=Math.abs(i.x-o.x+i.y-o.y+i.z-o.z);n>t.sensitivity?(a.timeoutId=setTimeout(c,t.callbackDelay),e&&e({})):a.timeoutId=setTimeout(c,t.frequency)},v=!1;return a.motionWatchId=h.watch(t,function(t){t.errorCode?(e(t),m.clearWatch(r)):(i=t.accelerationIncludingGravity,v||(v=!0,c()))}),r}),m.clearWatch||(m.clearWatch=function(t,e){var o=n.get(t);o&&(h.clearWatch(o.motionWatchId),clearTimeout(o.timeoutId),n.remove(t)),e&&e({})})}(this);